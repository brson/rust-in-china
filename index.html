<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Build a VM in Rust</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/brson-theme.css">
    <link rel="stylesheet" href="css/theme/custom-theme.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css">

    <!-- Custom rules -->
    <link rel="stylesheet" href="css/brson.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>

  <body id="brson">
    <div class="reveal">
      <div class="slides">

        <section>
          <div class="two-box big-small">
            <div>
              <h1>
                Building a VM in Rust<br>
                <sub>(that also runs Rust)</sub>
              </h1>
              <p>Aimee & Brian</p>
              <p>Rust.Tokyo 2019</p>
              <!--<p>rustinblockchain.org</p>-->
              <!--Game link QRcode-->
            </div>
            <div>
              <div class="img-box">
                <img src="images/rust-vm-repo-logo.png">
              </div>
            </div>
          </div>
        </section>

        <section>
          <div class="title-two-box">
            <div>
              <h2>About us</h2>
            </div>
            <div>
              <div>
                <div>
                  <img src="images/aimee-cat.jpg"></img>
                  <p>Aimee</p>
                </div>
              </div>
              <div>
                <div>
                  <img src="images/brian.jpeg"></img>
                  <p>Brian</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <div>
            <h2>
              Building a VM in Rust<br>
              <sub>(that also runs Rust)</sub>
            </h2>
            <ul>
              <li>Part 1: Building a RISC-V VM
              <li>Part 2: Running Rust on <em>that</em> VM
            </ul>
          </div>
        </section>

        <section>
          <div class="two-box">
            <div>
              <h2>Part 1:<br>Building a VM</h2>
            </div>
            <div>
              <div class="img-box">
                <img src="images/grid.png">
              </div>
            </div>
          </div>
        </section>

        <section>
          <div>
            <h3>Virtual Machines</h3>
            <ul>
              <li>TODO
            </ul>
          </div>
        </section>

        <section>
          <div>
            <h3>Why build a VM?</h3>
            <ul>
              <li class="fragment fade-left">Runtime Platform
              <li class="fragment fade-left">Hardware Emulation
              <li class="fragment fade-left">Sandboxing
              <li class="fragment fade-left">Education
            </ul>
          </div>
          <aside class="notes">
            e.g. Java JVM<br>
            
            e.g. QEMU<br>

            e.g. WASM<br>
          </aside>
        </section>

        <section>
          <div class="two-box">
            <div>
              <h3>VM's are cool</h3>
            </div>
            <div>
              <div class="img-box">
                <img src="images/grid.png">
              </div>
            </div>
          </div>
        </section>

        <section>
          <div>
            <h3>CKB VM</h3>
            <p>
              A general-purpose RISC-V VM,<br>built for the Nervos blockchain network.
            </p>
            <p><a href="https://github.com/nervosnetwork/ckb-vm">https://github.com/nervosnetwork/ckb-vm</a></p>
          </div>
        </section>


        <!--RISC-V-->

        <section>
          <div class="TODO-title-over-image">
            <div>
              <h3>RISC-V</h3>
            </div>
            <div>
              <div class="img-box">
                <img src="images/grid.png" width="100px" height="100px"><!-- TODO: change img to risc-v -->
              </div>
            </div>
            <div>
              <p><a href="https://www.riscv.org">www.riscv.org</a></p>
            </div>
        </section>

        <section>
          <div>
            <h3>Why RISC-V?</h3>
            <p>An open & frozen ISA</p>
          </div>
          <aside class="notes">
            <p>"instruction set architecture"</p>
            <p>Created by Berkeley</p>
            <p>Lisence, free to use. No NDAs needed</p>
            <p>What does it mean? Explain open & frozen ISA, As an ISA for a real CPU, each RISC-V instruction has a fixed cost called cycles, so CKB-VM can work in a fixed, bounded memory space.</p>
            <p>
              RISC-V is a modular ISA with 32- and 64-bit variants, as well as a range of options specified in "ISA naming strings". The RISC-V backend supports both variants and all standard extensions. RV32IMAFDC, RV64IMAFDC, and the ilp32, ilp32f, ilp32d, lp64, lp64f, lp64d ABIs (the clang hard-float ABI patch will land imminently.

              <!-- <https://reviews.llvm.org/D60456> source: https://lists.llvm.org/pipermail/llvm-dev/2019-July/133724.html -->
            </p>
          </aside>
        </section>

        <section>
          <div>
            <h3>Why RISC-V?</h3>
            <p>Flexible & extensions</p>
          </div>
          <aside class="notes">
            <p>Simple, only a few instructions.</p>
            <p>“Base” ISAs: RV32I, RV32E, RV64I, RV128I.</p>
            <p>CKB: RV32IMAC (Integer + Multiplication/division + Atomic + Compressed instructions</p>
          </aside>
        </section>

        <section>
          <div>
            <h3>Why RISC-V?</h3>
            <p>Numerous language support:</p>
            <ul>
              <li>Rust, C/C++, Go, Ruby, Python, JavaScript, Bitcoin Script, Solidity, …
            </ul>
          </div>
        </section>

        <section>
          <div>
            <h3>Why RISC-V?</h3>
            <p>Ecosystem, and supported by industry</p>
          </div>
          <aside class="notes">
            <p>If standard solutions don't work, add your extentions.</p>
          </aside>
        </section>

        <section>
          <div>
            <h3>RISC-V is cool!</h3>
          </div>
        </section>

        <!--CKB-VM Architecture-->

        <section>
          <div>
            <h3>CKB-VM</h3>
            <p>https://github.com/nervosnetwork/ckb-vm</p>
          </div>
          <aside class="notes">
            <p>open the repo</p>
            <p>VM + Runtime + Client code</p>
            <p>Run VM code</p>
          </aside>
        </section>

        <!--CKB-VM Use cases-->

        <section>
          <div>
            <h3>Use cases</h3>
            <ul>
              <li>Crypto algorithm as a contract
            </ul>
          </div>
          <aside class="notes">
            <p>Compile secp256k1 via GCC to RISC-V, then deploy it on CKB.</p>
            <p>support MimbleWimble via a contract</p>
          </aside>
        </section>

        <section>
          <div>
            <h3>Use cases</h3>
            <ul>
              <li>Crypto algorithm as a contract
              <li>Existing blockchain VMs
            </ul>
          </div>
          <aside class="notes">
            <p>Solidity is fading, what can we do with the current dapps</p>
            <p>Compile an existing blockchain VM(Bitcoin Script, EVM, …) to RISC-V, then deploy it on CKB</p>
          </aside>
        </section>

        <section>
          <div>
            <h3>Use cases</h3>
            <ul>
              <li>Crypto algorithm as a contract
              <li>Existing blockchain VMs
              <li>Higher level languages
            </ul>
          </div>
          <aside class="notes">
            <p>Compile a JS implementation to RISC-V, then deploy to CKB. </p>
          </aside>
        </section>

        <section>
          <div>
            <h3>Use cases</h3>
            <ul>
              <li>Crypto algorithm as a contract
              <li>Existing blockchain VMs
              <li>Higher level languages
              <li>WebAssembly
            </ul>
          </div>
          <aside class="notes">
            <p>WASM => RISC-V transpiler. </p>
          </aside>
        </section>





        <section>
          <div>
            <h3>Part 2: Running Rust on CKB-VM</h3>
          </div>
        </section>

        <section>
          <div>
            <h3>The limits of Rust</h3>
            <p>Where did CKB-VM have problems with Rust</p>
          </div>
          <aside class="notes">
            <p>Rust is awesome in most cases, but watch out for quirks</p>
          </aside>
        </section>


        
      </div> <!-- class="slides" -->

    </div> <!-- class="reveal" -->

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
      history: true,
      margin: 0,
      /*width: "100%",
      height: "100%",*/
      /*width: 960,
      height: 700,*/
      width: 1920,
      height: 1080,
      minScale: 0.1,
      maxScale: 20,
      dependencies: [
      { src: 'plugin/markdown/marked.js' },
      { src: 'plugin/markdown/markdown.js' },
      { src: 'plugin/notes/notes.js', async: true },
      { src: 'plugin/highlight/highlight.js', async: true }
      ]
      });
    </script>
  </body>
</html>
