<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Building a VM in Rust</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/brson-theme.css">
    <link rel="stylesheet" href="css/theme/custom-theme.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css">

    <!-- Custom rules -->
    <link rel="stylesheet" href="css/brson.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>

  <body id="brson">
    <div class="reveal">
      <div class="slides">

        <section>
          <div class="two-box big-small">
            <div>
              <h1>
                Building a VM<br>in Rust<br>
                <sub>(that also runs Rust)</sub>
              </h1>
              <p><a href="https://www.ferrisfencing.org">www.ferrisfencing.org</a></p>
            </div>
            <div>
              <div class="img-box">
                <img src="images/ferris-fencing-url.svg">
              </div>
            </div>
          </div>
        </section>

        <section>
          <div>
            <img src="images/ferris-fencing-battle.svg">
            <p><a href="https://www.ferrisfencing.org">www.ferrisfencing.org</a></p>
          </div>
        </section>

        <section>
          <div class="title-two-box">
            <div>
              <h2>About us</h2>
            </div>
            <div>
              <div>
                <div>
                  <img src="images/aimee-cat.jpg"></img>
                  <p>Aimee</p>
                </div>
              </div>
              <div>
                <div>
                  <img src="images/brian.jpeg"></img>
                  <p>Brian</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <div>
            <h2>
              Building a VM in Rust<br>
              <sub>(that also runs Rust)</sub>
            </h2>
            <ul>
              <li>Part 1: VM's, RISC-V, and CKB-VM
              <li>Part 2: Building a RISC-V VM
              <li>Part 3: Running Rust on <em>that</em> VM
            </ul>
          </div>
        </section>

        <section>
          <div class="two-box">
            <div>
              <p>Part 1:</p>
              <h2>VM's, RISC-V, and CKB-VM</h2>
            </div>
            <div>
              <div class="img-box">
                <img src="images/logo-nervos-light-withname.svg">
              </div>
            </div>
          </div>
        </section>

        <section>
          <div>
            <h3>Virtual Machines</h3>
            <div>
              <div class="img-box">
                <img src="images/virtual-machine.jpg">
              </div>
              <p style="font-size: 0.9rem;font-style: italic;"><a href="https://www.flickr.com/photos/25752543@N06/4714661209">"Floating Tree"</a><span>by <a href="https://www.flickr.com/photos/25752543@N06">AlexGroundwater</a></span> is licensed under <a href="https://creativecommons.org/licenses/by-sa/2.0/?ref=ccsearch&atype=html" style="margin-right: 5px;">CC BY-SA 2.0</a><a href="https://creativecommons.org/licenses/by-sa/2.0/?ref=ccsearch&atype=html" target="_blank" rel="noopener noreferrer" style="display: inline-block;white-space: none;opacity: .7;margin-top: 2px;margin-left: 3px;height: 22px !important;"><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-by_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-sa_icon.svg" /></a>
              </p>
            </div>
          </div>
        </section>

        <section>
          <div>
            <h3>Why build a VM?</h3>
            <ul>
              <li class="fragment fade-left">Runtime Platform
              <li class="fragment fade-left">Hardware Emulation
              <li class="fragment fade-left">Sandboxing
              <li class="fragment fade-left">Education
            </ul>
          </div>
          <aside class="notes">
            e.g. Java JVM<br>

            e.g. QEMU<br>

            e.g. WASM<br>
          </aside>
        </section>

        <section>
          <div class="two-box">
            <div>
              <h3>VM's are cool!</h3>
            </div>
            <div>
              <div class="img-box">
                <img src="images/vms-are-cool-lego.jpg">
              </div>
              <p style="font-size: 0.9rem;font-style: italic;"><a href="https://www.flickr.com/photos/40077566@N00/2188430123">"Lego"</a><span>by <a href="https://www.flickr.com/photos/40077566@N00">Myprofe</a></span> is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/2.0/?ref=ccsearch&atype=html" style="margin-right: 5px;">CC BY-NC-SA 2.0</a><a href="https://creativecommons.org/licenses/by-nc-sa/2.0/?ref=ccsearch&atype=html" target="_blank" rel="noopener noreferrer" style="display: inline-block;white-space: none;opacity: .7;margin-top: 2px;margin-left: 3px;height: 22px !important;"><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-by_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-nc_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-sa_icon.svg" /></a>
              </p>
              <!--

                <div class="img-box">
                  <img src="images/vms-are-cool-lego.jpg">
                </div>
                <p style="font-size: 0.9rem;font-style: italic;"><a href="https://www.flickr.com/photos/51272891@N00/22659656409">"EB Games float in 2015 Toronto Santa Claus Parade"</a><span>by <a href="https://www.flickr.com/photos/51272891@N00">MaxVT</a></span> is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/2.0/?ref=ccsearch&atype=html" style="margin-right: 5px;">CC BY-NC-SA 2.0</a><a href="https://creativecommons.org/licenses/by-nc-sa/2.0/?ref=ccsearch&atype=html" target="_blank" rel="noopener noreferrer" style="display: inline-block;white-space: none;opacity: .7;margin-top: 2px;margin-left: 3px;height: 22px !important;"><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-by_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-nc_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-sa_icon.svg" /></a>
                </p>

              -->
            </div>
          </div>
        </section>

        <section>
          <div>
            <h3>CKB-VM</h3>
            <div>
              <div class="img-box">
                <img src="images/logo-nervos-light.svg" hight="300px" width="300px">
              </div>
            </div>
            <p>
              A general-purpose RISC-V VM,<br>built for the Nervos blockchain network.
            </p>
            <p><a href="https://github.com/nervosnetwork/ckb-vm">https://github.com/nervosnetwork/ckb-vm</a></p>
          </div>
        </section>


        <!--CKB-VM Use cases-->

        <section>
          <div>
            <h3>Blockchain VM use cases</h3>
            <ul>
              <li class="fragment fade-left">Crypto algorithm as a contract
              <li class="fragment fade-left">Existing blockchain VMs
              <li class="fragment fade-left">Higher level languages
              <li class="fragment fade-left">WebAssembly
            </ul>
          </div>
          <aside class="notes">
            <p>1) Compile secp256k1 via GCC to RISC-V, then deploy it on CKB.</p>
            <p>1) support MimbleWimble via a contract</p>
            <p>2) Solidity is fading, what can we do with the current dapps</p>
            <p>2) Compile an existing blockchain VM(Bitcoin Script, EVM, …) to RISC-V, then deploy it on CKB</p>
            <p>3) Compile a JS implementation to RISC-V, then deploy to CKB. </p>
            <p>4) WASM => RISC-V transpiler. </p>
          </aside>
        </section>


        <!--RISC-V-->

        <section>
          <div class="TODO-title-over-image">
            <div>
              <div class="img-box">
                <img src="images/logo-risc-v-white.png">
              </div>
            </div>
            <div>
              <p><a href="https://www.riscv.org">www.riscv.org</a></p>
            </div>
        </section>

        <section>
          <div>
            <h3>Why RISC-V?</h3>
          </div>
        </section>

        <section>
          <div>
            <p>An open & frozen ISA</p>
          </div>
          <aside class="notes">
            <p>"instruction set architecture"</p>
            <p>Created by Berkeley</p>
            <p>Lisence, free to use. No NDAs needed</p>
            <p>What does it mean? Explain open & frozen ISA, As an ISA for a real CPU, each RISC-V instruction has a fixed cost called cycles, so CKB-VM can work in a fixed, bounded memory space.</p>
            <p>
              RISC-V is a modular ISA with 32- and 64-bit variants, as well as a range of options specified in "ISA naming strings". The RISC-V backend supports both variants and all standard extensions. RV32IMAFDC, RV64IMAFDC, and the ilp32, ilp32f, ilp32d, lp64, lp64f, lp64d ABIs (the clang hard-float ABI patch will land imminently.

              <!-- <https://reviews.llvm.org/D60456> source: https://lists.llvm.org/pipermail/llvm-dev/2019-July/133724.html -->
            </p>
          </aside>
        </section>

        <section>
          <div>
            <p>Flexible & Extensible</p>
          </div>
          <aside class="notes">
            <p>Simple, only a few instructions.</p>
            <p>“Base” ISAs: RV32I, RV32E, RV64I, RV128I.</p>
            <p>CKB: RV32IMAC (Integer + Multiplication/division + Atomic + Compressed instructions</p>
          </aside>
        </section>

        <section>
          <div>
            <p>Language support:</p>
            <p>Rust, C/C++, Go, Ruby,<br>Python, JavaScript …</p>
          </div>
        </section>

        <section>
          <div>
            <p>Ecosystem, industry support</p>
            <div>
                <div class="img-box">
                  <img src="images/risc-v-is-cool.jpg"><!-- TODO: change img to industries logos -->
                </div>
            </div>
          </div>
          <aside class="notes">
            <p>If standard solutions don't work, add your extentions.</p>
          </aside>
        </section>

        <section>
          <div class="two-box">
            <div>
              <h3>RISC-V is cool!</h3>
            </div>
            <div>
              <div class="img-box">
                <img src="images/risc-v-is-cool.jpg">
              </div>
              <p style="font-size: 0.9rem;font-style: italic;"><a href="https://www.flickr.com/photos/97280474@N05/16252683226">"Lego Bricktober Theater 40180"</a><span>by <a href="https://www.flickr.com/photos/97280474@N05">mureut.kr</a></span> is licensed under <a href="https://creativecommons.org/licenses/by-nd/2.0/?ref=ccsearch&atype=html" style="margin-right: 5px;">CC BY-ND 2.0</a><a href="https://creativecommons.org/licenses/by-nd/2.0/?ref=ccsearch&atype=html" target="_blank" rel="noopener noreferrer" style="display: inline-block;white-space: none;opacity: .7;margin-top: 2px;margin-left: 3px;height: 22px !important;"><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-by_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-nd_icon.svg" /></a>
              </p>
            </div>
          </div>
        </section>


        <!--CKB-VM Architecture-->

        <section>
          <div class="two-box">
            <div>
              <p>Part 2:</p>
              <h2>Building a RISC-V VM</h2>
            </div>
            <div>
              <div class="img-box">
                <img src="images/build-a-risc-v-vm.jpg">
              </div>
              <p style="font-size: 0.9rem;font-style: italic;"><a href="https://www.flickr.com/photos/88488351@N00/17148263990">"2015 Lego Club"</a><span>by <a href="https://www.flickr.com/photos/88488351@N00">Franklin Park Library</a></span> is licensed under <a href="https://creativecommons.org/licenses/by/2.0/?ref=ccsearch&atype=html" style="margin-right: 5px;">CC BY 2.0</a><a href="https://creativecommons.org/licenses/by/2.0/?ref=ccsearch&atype=html" target="_blank" rel="noopener noreferrer" style="display: inline-block;white-space: none;opacity: .7;margin-top: 2px;margin-left: 3px;height: 22px !important;"><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-by_icon.svg" /></a>
              </p>
            </div>
          </div>
        </section>

        <section>
          <div>
            <h3>CKB-VM architecture</h3>
          </div>
          <aside class="notes">
            <p>open the repo</p>
            <p>VM + Runtime + Client code</p>
            <p>Run VM code</p>
          </aside>
        </section>

        <section>
          <div>
            <h3>The limits of Rust</h3>
            <p>Where did CKB-VM have problems with Rust</p>
          </div>
          <aside class="notes">
            <p>Rust is awesome in most cases, but watch out for quirks</p>
          </aside>
        </section>


        <section>
          <div>
            <p>Part 3: </p>
            <h2>Running Rust on CKB-VM</h2>
          </div>
        </section>

        <section>
          <div>
            <h2>ありがとう！</h2>
            <p>https://t.me/nervos_ckb_dev</p>
            <div>
              <div class="img-box">
                <img src="images/logo-nervos-light-withname.svg" height="300px" width="300px">
              </div>
            </div>
          </div>
        </section>



      </div> <!-- class="slides" -->

    </div> <!-- class="reveal" -->

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
      history: true,
      margin: 0,
      /*width: "100%",
      height: "100%",*/
      /*width: 960,
      height: 700,*/
      width: 1920,
      height: 1080,
      minScale: 0.1,
      maxScale: 20,
      dependencies: [
      { src: 'plugin/markdown/marked.js' },
      { src: 'plugin/markdown/markdown.js' },
      { src: 'plugin/notes/notes.js', async: true },
      { src: 'plugin/highlight/highlight.js', async: true }
      ]
      });
    </script>
  </body>
</html>
